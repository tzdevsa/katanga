###
#
#   Warning: This file is copied from another repo.
#     Any changes made to outside of the source repo may be overridden. 
#     To modify, change the file at the source repo
#
#   https://github.com/think-zambia-foundation/github-settings/tree/main/.github/settings.yml
#
###

# These settings are synced to GitHub by https://probot.github.io/apps/settings/
repository:
  # See https://docs.github.com/en/rest/reference/repos#update-a-repository for all available settings.

  # Either `true` to enable automatic deletion of branches on merge, or `false` to disable
  delete_branch_on_merge: true

  # Updates the default branch for this repository.
  default_branch: main

branches:
  - name: main
    
    # https://docs.github.com/en/rest/reference/repos#update-branch-protection
    # Branch Protection settings. Set to null to disable
    protection:

      # Required. Require at least one approving review on a pull request, before merging. Set to null to disable.
      required_pull_request_reviews:
    
        # The number of approvals required. (1-6)
        required_approving_review_count: 2
    
        # Dismiss approved reviews automatically when a new commit is pushed.
        dismiss_stale_reviews: true

      # Required. Require status checks to pass before merging. Set to null to disable.
      required_status_checks: {
        strict: false,
        contexts: [
          "Pull-request-title-includes-jira-issue-key",
          "QA-steps-checklist-done"
        ]
      }

      # Required. Enforce all configured restrictions for administrators. Set to true to enforce required status checks for repository administrators. Set to null to disable.
      enforce_admins: null
      
      # Prevent merge commits from being pushed to matching branches
      required_linear_history: null
      
      # Required. Restrict who can push to this branch. Team and user restrictions are only available for organization-owned repositories. Set to null to disable.
      restrictions: null